<!-- GitHub.html atualizado com renderTransactionList melhorado -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Controle de Caixa v24.9 (Estável) - Congregação Cristã</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .campo-condicional { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out; }
    .campo-condicional.visivel { max-height: 200px; }
    .list-item-enter { opacity: 0; transform: translateY(10px); animation: fadeIn 0.5s ease-out forwards; }
    @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
    .filter-btn-active { background-color: #2563eb; color: white; }
    @media print {
      @page { size: landscape; margin: 15mm; }
      body * { visibility: hidden; }
      #print-area, #print-area * { visibility: visible; }
      #print-area {
        position: absolute; left: 0; top: 0; width: 100%; padding: 0; font-size: 10px;
      }
      .no-print { display: none; }
      table { width: 100%; border-collapse: collapse; }
      th, td { border: 1px solid #ddd; padding: 6px; text-align: left; }
      th, tfoot td {
        background-color: #f2f2f2; color: #333; font-weight: bold;
      }
      .text-right { text-align: right; }
      .text-red-600 { color: #DC2626 !important; }
      .text-green-600 { color: #16A34A !important; }
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">
  <!-- TODO: Aqui você insere o conteúdo HTML como já estava no seu GitHub.html -->
  <!-- O conteúdo visual, modais, telas de login e interface permanecem como estavam -->

  <script>
    // Inclua aqui todas as variáveis, autenticação e funções existentes, como initializeApp, auth, db, etc.
    // No final, substitua a função renderTransactionList pela atualizada abaixo:

    function renderTransactionList(transactions) {
      const container = document.getElementById('transactions-list');
      container.innerHTML = '';

      if (transactions.length === 0) {
        container.innerHTML = `<p class="text-center text-gray-500">Nenhum lançamento encontrado.</p>`;
        return;
      }

      transactions.forEach(t => {
        const isEntrada = t.amount >= 0;
        const colorClass = isEntrada ? 'text-green-600' : 'text-red-600';
        const valorFormatado = formatCurrency(Math.abs(t.amount));
        const dataFormatada = formatDate(t.date);
        const categoria = t.category || '---';
        const descricao = t.description || '---';
        const fornecedor = t.supplier || (t.prestacaoContas?.fornecedor || '---');
        const id = t.id;
        const status = t.status.replace('_', ' ').toUpperCase();

        let acoes = '';

        if (t.status === 'pendente_confirmacao' && t.type === 'entrada') {
          acoes += `
            <button onclick="if(confirm('Confirmar entrada?')) window.confirmEntry('${id}')" 
              class="flex items-center gap-1 text-sm text-blue-600 hover:underline">
              <ion-icon name="checkmark-circle-outline"></ion-icon> Confirmar
            </button>`;
        }

        if (t.status === 'pendente_aprovacao' && t.type === 'saida') {
          acoes += `
            <button onclick="if(confirm('Aprovar esta saída?')) window.approveWithdrawal('${id}')" 
              class="flex items-center gap-1 text-sm text-green-600 hover:underline">
              <ion-icon name="checkmark-outline"></ion-icon> Aprovar
            </button>
            <button onclick="if(confirm('Cancelar esta saída?')) window.cancelWithdrawal('${id}')" 
              class="flex items-center gap-1 text-sm text-red-600 hover:underline">
              <ion-icon name="close-circle-outline"></ion-icon> Cancelar
            </button>`;
        }

        if (t.status === 'pendente_prestacao') {
          acoes += `
            <button onclick="window.openAddExpenseModal('${id}', \`${descricao}\`)" 
              class="flex items-center gap-1 text-sm text-blue-600 hover:underline">
              <ion-icon name="add-outline"></ion-icon> Adicionar Despesa
            </button>
            <button onclick="if(confirm('Finalizar prestação de contas?')) window.finalizeAccountability('${id}', ${Math.abs(t.amount)})" 
              class="flex items-center gap-1 text-sm text-purple-600 hover:underline">
              <ion-icon name="checkmark-done-outline"></ion-icon> Finalizar
            </button>`;
        }

        if (t.status !== 'concluido') {
          acoes += `
            <button onclick="window.openEditModal('${id}')" 
              class="flex items-center gap-1 text-sm text-gray-600 hover:underline">
              <ion-icon name="create-outline"></ion-icon> Editar
            </button>`;
        }

        const html = `
          <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md list-item-enter">
            <div class="flex justify-between items-center mb-2">
              <div class="text-sm font-semibold ${colorClass}">
                ${isEntrada ? 'ENTRADA' : 'SAÍDA'} • ${dataFormatada}
              </div>
              <div class="text-xs font-medium uppercase px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded">
                ${status}
              </div>
            </div>
            <div class="text-sm mb-1"><strong>Descrição:</strong> ${descricao}</div>
            <div class="text-sm mb-1"><strong>Categoria:</strong> ${categoria}</div>
            <div class="text-sm mb-1"><strong>Fornecedor:</strong> ${fornecedor}</div>
            <div class="text-sm mb-2"><strong>Valor:</strong> 
              <span class="font-bold ${colorClass}">${valorFormatado}</span>
            </div>
            <div class="flex flex-wrap gap-3 mt-2">
              ${acoes}
            </div>
          </div>
        `;

        container.innerHTML += html;
      });
    }
  </script>
</body>
</html>
